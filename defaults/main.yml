---
# KVM host packages
libvirt_pkgs:
   - virt-install
   - libvirt-daemon-config-network
   - libvirt-daemon-kvm
   - libguestfs-tools
   - libvirt-client
   - qemu-kvm
   - nfs-utils
   - libvirt-daemon
   - libvirt-client
   - virt-top
   - tuned
   - openssh-server
   - wget
   - git
   - net-tools
   - bind-utils
   - yum-utils
   - iptables-services
   - bridge-utils
   - bash-completion
   - kexec-tools
   - sos
   - psacct
   - vim
   - pyOpenSSL
   - device-mapper-event-libs
   - device-mapper-libs
   - httpd-tools
   - java-1.8.0-openjdk-devel.x86_64
   - tmux
   - patch
   - python-dns

libvirt_services:
  - libvirtd
  - tuned

# This hash defines all the libvirt networks that should be created
# The example below defines a bridge and nat network.
# The bridge network is needed for ocp3 installs, IdM and anything else that needs direct
# access to the host network.
# The nat network is primarly for OCP4. Perhaps it will be use for other things in the furture.
# If there are other types of networks you want to support, make sure
# to create the associated libvirt network xml template

libvirt_host_networks:
  - name: "{{ cluster_name }}"
    create: true
    mode: nat
    int_domain: compute.local
    external_domain: "{{ public_domain }}"
    mac_start: "52:54:00:"
    master_count: 3
    compute_count: 3
    xml_file: "nat_network.xml.j2"
  - name: "{{ vm_libvirt_net }}"
    create: true
    mode: bridge
    bridge_device: "{{ qubinode_bridge_name }}"
    xml_file: "br_network.xml.j2"

libvirt_host_networks: []
kvm_host_ipaddr: "{{ ansible_default_ipv4.address }}"
kvm_host_interface: "{{ ansible_default_ipv4.interface }}"
kvm_host_gw: "{{ ansible_default_ipv4.gateway }}"
kvm_host_macaddr: "{{ ansible_default_ipv4.macaddress }}"
kvm_host_netmask: "{{ ansible_default_ipv4.netmask }}"
kvm_host_bootproto: 'dhcp'
kvm_bridge_type: 'Bridge'
storage_nic: false
libvirt_disk: false
use_dns: idm # use idm or use libvirt

kvm_host_ip: "{{ kvm_host_ipaddr }}"
kvm_host_mask_prefix: "{{ kvm_host_netmask }}"
ssh_username: ""
kvm_host_domain: "lab.example"
kvm_host_dns_server: "1.1.1.1"
dns_servers:
  - "{{ dns_server }}"
  - "8.8.8.8"

kvm_host_libvirt_dir: /var/lib/libvirt/images

libvirt_host_storage_pools:
  - name: default
    state: active
    autostart: yes
    path: "{{ kvm_host_libvirt_dir }}"

# set to false to skip creating a bridge interface
configure_bridge: true
